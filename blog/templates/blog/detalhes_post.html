{% extends "base.html" %}

{% block content %}
<article class="max-w-3xl mx-auto bg-white shadow-md rounded-xl p-8">
    <header class="mb-6 border-b pb-4">
        <h1 class="text-3xl font-extrabold text-slate-800 mb-2">{{ post.titulo }}</h1>
        <p class="text-sm text-slate-500">
            Por <span class="font-medium text-slate-700">{{ post.autor }}</span>
            em {{ post.data_criacao|date:"d/m/Y" }}
        </p>
    </header>

    <div class="prose prose-slate max-w-none">
        {{ post.conteudo|linebreaks }}
    </div>
</article>

<!-- Comentários -->
<section class="max-w-3xl mx-auto mt-10">
    <h3 class="text-xl font-semibold text-slate-800 mb-4">
        Comentários ({{ comments.count }})
    </h3>

    <div class="space-y-6">
        {% for comment in comments %}
        <div class="bg-slate-100 p-4 rounded-lg shadow-sm">
            <h4 class="text-lg font-bold text-blue-700">{{ comment.nome }}</h4>
            <p class="text-sm text-slate-500">{{ comment.email }}</p>
            <p class="mt-2 text-slate-700">{{ comment.corpo }}</p>
            <p class="text-xs text-slate-400 mt-2">Postado em {{ comment.data_criacao|date:"d/m/Y H:i" }}</p>
        </div>
        {% empty %}
        <p class="text-slate-600">Ainda não há comentários. Seja o primeiro a comentar!</p>
        {% endfor %}
    </div>
</section>

<!-- Formulário -->
<section class="max-w-3xl mx-auto mt-10">
    {% if novo_comentario %}
    <div class="p-4 bg-green-100 text-green-800 rounded-lg mb-6">
        Seu comentário foi adicionado com sucesso! ✅
    </div>
    {% else %}
    <h3 class="text-xl font-semibold text-slate-800 mb-4">Deixe um comentário</h3>
    <form method="post" class="space-y-5 bg-white p-6 shadow-md rounded-xl">
        {% csrf_token %}
        {{ comment_form.as_p }}
        <button type="submit"
            class="w-full sm:w-auto bg-blue-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 transition">
            Enviar Comentário
        </button>
    </form>
    {% endif %}
</section>
{% endblock %}
